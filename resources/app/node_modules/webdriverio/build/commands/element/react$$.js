"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = react$$;

var _fs = _interopRequireDefault(require("fs"));

var _utils = require("../../utils");

var _getElementObject = require("../../utils/getElementObject");

var _resq = require("../../scripts/resq");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const resqScript = _fs.default.readFileSync(require.resolve('resq'));

async function react$$(selector, props = {}, state = {}) {
  await this.executeScript(resqScript.toString(), []);
  await this.execute(_resq.waitToLoadReact);
  const res = await this.execute(_resq.react$$, selector, props, state, this);
  const elements = await _getElementObject.getElements.call(this, selector, res, true);
  return (0, _utils.enhanceElementsArray)(elements, this, selector, 'react$$', [props, state]);
}